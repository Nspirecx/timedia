<!DOCTYPE html>
<html>
<title>TiMedia</title>
<link rel="stylesheet" type="text/css" href="style.css">
<body>
<center>
<div class="top">
 <h2 style="color:white;">TiMedia</h2>
 </div>
<br><br>
 <div class="background" id="navbar">
	<a href="index.html"><img draggable=false id="home-icon" style="padding:50px;" width=50px src="home.png"></a>
	<a href="news.html"><img draggable=false id="news-icon" style="padding:50px;" width=50px src="news.png"></a>
	<a href="points.html"><img draggable=false id="money-icon" style="padding:50px;" width=50px src="money.png"></a>
	<a href="settings.html"><img draggable=false id="gears-icon" style="padding:50px;" width=50px src="gears.png"></a>
	<a href="messages.html"><img draggable=false id="messaging-icon" style="padding:50px;" width=50px src="timage.svg"></a>
	<a href="https://proudloyaltier.github.io/tidocs/"><img draggable=false id="docs-icon" style="padding:50px;" width=50px src="pen.png"></a>

</div><br><br><br><br><br><br>
	<div id="messages">No messages!</div><br>
	<button onclick="sendMessage(prompt('User:'), prompt('Message:'))" class="base btn2">Send Message</button>
<script>
function getCookie(cname) {
  var name = cname + "=";
  var decodedCookie = decodeURIComponent(document.cookie);
  var ca = decodedCookie.split(';');
  for (var i = 0; i < ca.length; i++) {
    var c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}
	
function getFromDatabase(gname) {
  var i = 0;
  while (i < document.getElementsByTagName('blockquote').length) {
    if (document.getElementsByClassName('author-name')[i].innerHTML == "to" + getCookie("name") + " ") {
      return(document.getElementsByTagName('blockquote')[i].innerHTML);
      throw new Error("Got value from database.");
    }
    i++;
	  if (i == 10) {
		  document.getElementsByTagName('img')[document.getElementsByTagName('img').length - 1].click();
	  }
  }

}

function storeInDatabase(sname, value) {
  document.getElementById("hcb_form_name").value = sname;
  document.getElementById("hcb_form_content").value = value;
  document.getElementById("hcb_submit").click();
}

function refreshMessages() {
	document.getElementById('messages').innerHTML = getFromDatabase("to" + getCookie("name"));
}
	
function sendMessage(user, message) {
	storeInDatabase("to" + user, "<p><b>" + getCookie("name") + ": </b>" + message + "</p>" + getFromDatabase("to" + user));
}

setInterval(refreshMessages, 100);
</script>
 <div style="visibility:hidden;" id="HCB_comment_box"><a href="http://www.htmlcommentbox.com">HTML Comment Box</a> is loading comments...</div>
 <link rel="stylesheet" type="text/css" href="//www.htmlcommentbox.com/static/skins/bootstrap/twitter-bootstrap.css?v=0" />
 <script type="text/javascript" id="hcb"> /*<!--*/ if(!window.hcb_user){hcb_user={};} (function(){var s=document.createElement("script"), l=hcb_user.PAGE || (""+window.location).replace(/'/g,"%27"), h="//www.htmlcommentbox.com";s.setAttribute("type","text/javascript");s.setAttribute("src", h+"/jread?page="+encodeURIComponent(l).replace("+","%2B")+"&mod=%241%24wq1rdBcg%243yD1.Hi93ryNAuOTAUZB50"+"&opts=16406&num=10&ts=1494623824036");if (typeof s!="undefined") document.getElementsByTagName("head")[0].appendChild(s);})(); /*-->*/ </script>
 </center>
 </body>
</html>
